<!DOCTYPE html>
 <html>
   <head>
     <meta charset="utf-8">
     <title>Графы - станции метро</title>
   </head>
   <body>
<?php
function find_path($graph, $start, $end, $path)
 {
  $path[] = $start;
  if ($start == $end)
   return $path;
  if (!isset($graph[$start]))
   return false;
  $shortest = array();
  foreach($graph[$start] as $node)
   {
   if (!in_array($node, $path))
    {
     $newpath = find_path($graph, $node, $end, $path);
     if ($newpath)
      {
       if (!$shortest || (count($newpath) < count($shortest)))
         $shortest = $newpath;
      }
    }
   }
  return $shortest;
 }
// определяем граф
$graph = array(
'Бульвар Дм. Донского' => array('Аннино'),
'Аннино' => array('Бульвар Дм. Донского', 'Ул. ак. Янгеля'),
'Ул. ак. Янгеля' => array('Аннино', 'Пражская'),
'Пражская' => array('Ул. ак. Янгеля', 'Южная'),
'Южная' => array('Пражская', 'Чертановская'),
'Чертановская' => array('Южная', 'Севастопольская'),
'Севастопольская' => array('Чертановская', 'Нахимовский проспект', 'Каховская'),
'Нахимовский проспект' => array('Севастопольская', 'Нагорная'),
'Нагорная' => array('Нахимовский проспект', 'Нагатинская'),
'Нагатинская' => array('Нагорная', 'Тульская'),
'Тульская' => array('Нагатинская', 'Серпуховская'),
'Серпуховская' => array('Тульская', 'Добрынинская'),
'Добрынинская' => array('Серпуховская', 'Полянка', 'Октябрьская', 'Павелецкая'),
'Каховская' => array('Севастопольская', 'Варшавская'),
'Варшавская' => array('Каховская', 'Каширская'),
'Каширская' => array('Варшавская', 'Коломенская', 'Кантемировская'),
'Кантемировская' => array('Каширская', 'Царицыно'),
'Царицыно' => array('Кантемировская', 'Орехово'),
'Орехово' => array('Царицыно', 'Домодедовская'),
'Домодедовская' => array('Орехово', 'Красногвардейская'),
'Красногвардейская' => array('Домодедовская')
);

if (isset($_POST['source']) && isset($_POST['destination']))
 {
  if (in_array($_POST['source'], array_keys($graph)) && in_array($_POST['destination'], array_keys($graph)))
   {
    $shortestPath = find_path($graph, $_POST['source'], $_POST['destination']);
    $shortestPath[0] = '<strong>' . $shortestPath[0] . '</strong>';
    $shortestPath[count($shortestPath) - 1] = '<strong>' . $shortestPath[count($shortestPath) - 1] . '</strong>';
    echo '<ul class="path">';
    foreach($shortestPath as $station)
     {
      echo "<li>{$station}</li>";
     }
    echo '</ul>';
   } else {
?>
       <p>Что-то пошло не так :(</p>
       <?php } ?>
     <?php } ?>
     <form method="post" action="">
       <select name="source">
   Откуда едем: 
   <?php foreach(array_keys($graph) as $station) { ?>
     <option name="<?php echo $station; ?>">
       <?php echo $station; ?>
     </option>
   <?php } ?>
       </select>
       <select name="destination">
   Куда едем:
   <?php foreach(array_keys($graph) as $station) { ?>
     <option name="<?php echo $station; ?>">
       <?php echo $station; ?>
     </option>
   <?php } ?>
       </select>
       <input type="submit" value="Поехали!">
     </form>    
   </body>
 </html>